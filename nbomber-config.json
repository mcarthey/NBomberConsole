{
  "TestSuite": "Enterprise HTTP Load Tests",
  "TestName": "jsonplaceholder_poc",

  "TargetScenarios": [
    "get_scenario",
    "post_scenario"
  ],

  "GlobalSettings": {
    "ScenariosSettings": [
      {
        "ScenarioName": "get_scenario",
        "WarmUpDuration": "00:00:05",
        "LoadSimulationsSettings": [
          { "RampingInject": [ 50, "00:00:01", "00:00:30" ] },
          { "Inject": [ 100, "00:00:01", "00:01:00" ] }
        ],
        "CustomSettings": {
          "HttpMethod": "GET",
          "Url": "https://jsonplaceholder.typicode.com/posts/1",
          "StepName": "get_single_post",
          "ExpectedStatusCode": 200,
          "Headers": {
            "Accept": "application/json",
            "X-Custom-TraceId": "nbomber-load-test"
          }
        },
        "ThresholdSettings": [
          { "OkRequest": "RPS >= 30" },
          { "OkRequest": "Percent > 90" },
          { "FailRequest": "Percent < 10" },
          { "OkLatency": "max < 2000" },
          { "OkLatency": "p75 < 500" },
          { "OkLatency": "p95 < 1000" },
          { "OkLatency": "p99 < 1500" },
          { "OkDataTransfer": "p75 < 200" },
          {
            "StatusCode": [ "500", "Percent < 5" ]
          },
          {
            "StatusCode": [ "400", "Percent < 5" ],
            "AbortWhenErrorCount": 10
          },
          {
            "StatusCode": [ "200", "Percent >= 90" ],
            "AbortWhenErrorCount": 10,
            "StartCheckAfter": "00:00:15"
          }
        ]
      },
      {
        "ScenarioName": "post_scenario",
        "WarmUpDuration": "00:00:05",
        "LoadSimulationsSettings": [
          { "RampingInject": [ 20, "00:00:01", "00:00:30" ] },
          { "Inject": [ 50, "00:00:01", "00:01:00" ] }
        ],
        "CustomSettings": {
          "HttpMethod": "POST",
          "Url": "https://jsonplaceholder.typicode.com/posts",
          "StepName": "create_new_post",
          "ExpectedStatusCode": 201,
          "Headers": {
            "Accept": "application/json",
            "X-Custom-TraceId": "nbomber-load-test"
          },
          "JsonBody": {
            "title": "NBomber Load Test Post",
            "body": "This is a POST request generated by the NBomber load testing template.",
            "userId": 1
          }
        },
        "ThresholdSettings": [
          { "OkRequest": "RPS >= 10" },
          { "OkRequest": "Percent > 85" },
          { "FailRequest": "Percent < 15" },
          { "OkLatency": "max < 3000" },
          { "OkLatency": "p75 < 800" },
          { "OkLatency": "p95 < 1500" },
          { "OkDataTransfer": "p75 < 300" },
          {
            "StatusCode": [ "500", "Percent < 5" ]
          },
          {
            "StatusCode": [ "201", "Percent >= 80" ],
            "AbortWhenErrorCount": 10,
            "StartCheckAfter": "00:00:15"
          }
        ]
      }
    ],

    "ReportingInterval": "00:00:10"
  }
}
